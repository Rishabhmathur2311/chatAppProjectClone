{"ast":null,"code":"import _regeneratorRuntime from\"E:/WhatsApp clone/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/WhatsApp clone/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/WhatsApp clone/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"E:/WhatsApp clone/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useContext,useEffect,useState}from\"react\";import{Box,Typography}from\"@mui/material\";import styled from\"@emotion/styled\";import{AccountContext}from\"../../context/AccountProvider\";import{getConversation,setConversation}from\"../../service/api\";import{FormatDate}from\"../../utils/common-utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Component=styled(Box)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\ndisplay: flex;\\nheight: 45px;\\npadding: 13px 0;\\ncursor: pointer;\\n\"])));var Image=styled('img')({borderRadius:\"50%\",width:50,height:50,padding:\"0 14px\"});var Name=styled(Box)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\npadding: 3%;\\npadding-top: 1%;\\nmargin-left: 4px;\\ndisplay: block;\\n\"])));var Container=styled(Box)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    display: flex;\\n\"])));var Timestamp=styled(Typography)(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    font-size: 12px;\\n    margin-left: auto;\\n    color: #00000099;\\n    margin-right: 20px;\\n\"])));var Text=styled(Typography)(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n    display: block;\\n    color: rgba(0, 0, 0, 0.6);\\n    font-size: 14px;\\n\"])));var Conversation=function Conversation(_ref){var _message$text;var user=_ref.user;var _useContext=useContext(AccountContext),setPerson=_useContext.setPerson,account=_useContext.account,messageFlag=_useContext.messageFlag;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];useEffect(function(){var getDetail=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getConversation({senderId:account.sub,receiverId:user.sub});case 2:data=_context.sent;setMessage({text:data===null||data===void 0?void 0:data.message,timestamp:data===null||data===void 0?void 0:data.updatedAt});case 4:case\"end\":return _context.stop();}},_callee);}));return function getDetail(){return _ref2.apply(this,arguments);};}();getDetail();},[messageFlag]);var getUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setPerson(user);_context2.next=3;return setConversation({senderId:account.sub,receiverId:user.sub});case 3:case\"end\":return _context2.stop();}},_callee2);}));return function getUser(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Component,{onClick:function onClick(){return getUser();},children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Image,{src:user.picture,alt:\"display picture\"})}),/*#__PURE__*/_jsxs(Box,{style:{width:'100%'},children:[/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Typography,{children:user.name}),(message===null||message===void 0?void 0:message.text)&&/*#__PURE__*/_jsx(Timestamp,{children:FormatDate(message===null||message===void 0?void 0:message.timestamp)})]}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Text,{children:message!==null&&message!==void 0&&(_message$text=message.text)!==null&&_message$text!==void 0&&_message$text.includes('localhost')?'media':message.text})})]})]});};export default Conversation;","map":{"version":3,"names":["React","useContext","useEffect","useState","Box","Typography","styled","AccountContext","getConversation","setConversation","FormatDate","jsx","_jsx","jsxs","_jsxs","Component","_templateObject","_taggedTemplateLiteral","Image","borderRadius","width","height","padding","Name","_templateObject2","Container","_templateObject3","Timestamp","_templateObject4","Text","_templateObject5","Conversation","_ref","_message$text","user","_useContext","setPerson","account","messageFlag","_useState","_useState2","_slicedToArray","message","setMessage","getDetail","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","senderId","sub","receiverId","sent","text","timestamp","updatedAt","stop","apply","arguments","getUser","_ref3","_callee2","_callee2$","_context2","onClick","children","src","picture","alt","style","name","includes"],"sources":["E:/WhatsApp clone/client/src/chat/menu/Conversation.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Box, Typography } from \"@mui/material\";\r\nimport styled from \"@emotion/styled\";\r\nimport { AccountContext } from \"../../context/AccountProvider\";\r\nimport { getConversation, setConversation } from \"../../service/api\";\r\nimport {FormatDate} from \"../../utils/common-utils\";\r\n\r\nconst Component=styled(Box)`\r\ndisplay: flex;\r\nheight: 45px;\r\npadding: 13px 0;\r\ncursor: pointer;\r\n`\r\n\r\nconst Image=styled('img')({\r\n    borderRadius: \"50%\",\r\n    width:50,\r\n    height: 50,\r\n    padding: \"0 14px\",\r\n})\r\n\r\nconst Name=styled(Box)`\r\npadding: 3%;\r\npadding-top: 1%;\r\nmargin-left: 4px;\r\ndisplay: block;\r\n`\r\n\r\nconst Container = styled(Box)`\r\n    display: flex;\r\n`;\r\n\r\nconst Timestamp = styled(Typography)`\r\n    font-size: 12px;\r\n    margin-left: auto;\r\n    color: #00000099;\r\n    margin-right: 20px;\r\n`;\r\n\r\nconst Text = styled(Typography)`\r\n    display: block;\r\n    color: rgba(0, 0, 0, 0.6);\r\n    font-size: 14px;\r\n`;\r\n\r\nconst Conversation = ({user})=>{\r\n\r\n    const {setPerson, account, messageFlag}=useContext(AccountContext);\r\n\r\n    const [message, setMessage]=useState({});\r\n\r\n    useEffect(()=>{\r\n        const getDetail = async() => {\r\n            const data = await getConversation({ senderId: account.sub, receiverId: user.sub });\r\n            setMessage({ text: data?.message, timestamp: data?.updatedAt });\r\n        }\r\n        getDetail();\r\n    }, [messageFlag]);\r\n\r\n    const getUser= async()=>{\r\n        setPerson(user);\r\n        await setConversation({senderId: account.sub, receiverId: user.sub })\r\n    }\r\n\r\n    return(\r\n        <Component onClick={() => getUser()}>\r\n        <Box>\r\n            <Image src={user.picture} alt=\"display picture\" />\r\n        </Box>\r\n        <Box style={{width: '100%'}}>\r\n            <Container>\r\n                <Typography>{user.name}</Typography>\r\n                { \r\n                    message?.text && \r\n                    <Timestamp>{FormatDate(message?.timestamp)}</Timestamp>        \r\n                }\r\n            </Container>\r\n            <Box>\r\n                <Text>{message?.text?.includes('localhost') ? 'media' : message.text}</Text>\r\n            </Box>\r\n        </Box>\r\n    </Component>\r\n    );\r\n}\r\n\r\nexport default Conversation;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}