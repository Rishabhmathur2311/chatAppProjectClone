{"ast":null,"code":"import _regeneratorRuntime from\"E:/WhatsApp clone/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/WhatsApp clone/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/WhatsApp clone/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import{Box}from\"@mui/material\";import{getUsers}from\"../../service/api\";import Conversation from\"./Conversation\";import{AccountContext}from\"../../context/AccountProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";var Conversations=function Conversations(_ref){var text=_ref.text;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useContext=useContext(AccountContext),account=_useContext.account,socket=_useContext.socket,setActiveUsers=_useContext.setActiveUsers;useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data,filteredData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getUsers();case 2:data=_context.sent;filteredData=data.filter(function(user){return user.name.toLowerCase().includes(text.toLowerCase());});setUsers(filteredData);case 5:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[text]);useEffect(function(){var addUserFunc=function addUserFunc(){socket.current.emit('addUser',account);socket.current.on('getUsers',function(users){setActiveUsers(users);console.log(users);});};addUserFunc();},[account]);return/*#__PURE__*/_jsx(Box,{children:users.map(function(user){return user.sub!==account.sub&&/*#__PURE__*/_jsx(Conversation,{user:user});})});};export default Conversations;","map":{"version":3,"names":["React","useContext","useEffect","useState","Box","getUsers","Conversation","AccountContext","jsx","_jsx","Conversations","_ref","text","_useState","_useState2","_slicedToArray","users","setUsers","_useContext","account","socket","setActiveUsers","fetchData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","filteredData","wrap","_callee$","_context","prev","next","sent","filter","user","name","toLowerCase","includes","stop","apply","arguments","addUserFunc","current","emit","on","console","log","children","map","sub"],"sources":["E:/WhatsApp clone/client/src/chat/menu/Conversations.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport {Box} from \"@mui/material\";\r\nimport { getUsers } from \"../../service/api\";\r\nimport Conversation from \"./Conversation\";\r\nimport { AccountContext } from \"../../context/AccountProvider\";\r\n\r\nconst Conversations=({text})=>{\r\n\r\n    const [users, setUsers]=useState([]);\r\n    const {account, socket, setActiveUsers}=useContext(AccountContext);\r\n    \r\n\r\n    useEffect(()=>{\r\n        const fetchData=async()=>{\r\n            let data = await getUsers();\r\n            let filteredData = data.filter(user => user.name.toLowerCase().includes(text.toLowerCase()));\r\n        setUsers(filteredData);\r\n        }\r\n        fetchData();\r\n    }, [text]);\r\n\r\n    useEffect(() => {\r\n        const addUserFunc=()=>{\r\n        socket.current.emit('addUser', account);\r\n        socket.current.on('getUsers', users => {\r\n            setActiveUsers(users);\r\n            console.log(users);\r\n        })\r\n    }\r\n    addUserFunc();\r\n    }, [account]);\r\n\r\n\r\n    return (\r\n        <Box>\r\n            {users.map(user=>(\r\n                user.sub!==account.sub &&\r\n                <Conversation user={user}/>\r\n            ))}\r\n        </Box>\r\n    );\r\n}\r\n\r\nexport default Conversations;"],"mappings":"0VAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,OAAQC,GAAG,KAAO,eAAe,CACjC,OAASC,QAAQ,KAAQ,mBAAmB,CAC5C,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,OAASC,cAAc,KAAQ,+BAA+B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE/D,GAAM,CAAAC,aAAa,CAAC,QAAd,CAAAA,aAAaA,CAAAC,IAAA,CAAW,IAAR,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAEtB,IAAAC,SAAA,CAAwBV,QAAQ,CAAC,EAAE,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,WAAA,CAAwCjB,UAAU,CAACM,cAAc,CAAC,CAA3DY,OAAO,CAAAD,WAAA,CAAPC,OAAO,CAAEC,MAAM,CAAAF,WAAA,CAANE,MAAM,CAAEC,cAAc,CAAAH,WAAA,CAAdG,cAAc,CAGtCnB,SAAS,CAAC,UAAI,CACV,GAAM,CAAAoB,SAAS,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAA,MAAAC,IAAA,CAAAC,YAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACK,CAAA7B,QAAQ,CAAC,CAAC,QAAvBuB,IAAI,CAAAI,QAAA,CAAAG,IAAA,CACJN,YAAY,CAAGD,IAAI,CAACQ,MAAM,CAAC,SAAAC,IAAI,QAAI,CAAAA,IAAI,CAACC,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC5B,IAAI,CAAC2B,WAAW,CAAC,CAAC,CAAC,GAAC,CAChGtB,QAAQ,CAACY,YAAY,CAAC,CAAC,wBAAAG,QAAA,CAAAS,IAAA,MAAAd,OAAA,GACtB,kBAJK,CAAAL,SAASA,CAAA,SAAAC,KAAA,CAAAmB,KAAA,MAAAC,SAAA,OAId,CACDrB,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,CAACV,IAAI,CAAC,CAAC,CAEVV,SAAS,CAAC,UAAM,CACZ,GAAM,CAAA0C,WAAW,CAAC,QAAZ,CAAAA,WAAWA,CAAA,CAAK,CACtBxB,MAAM,CAACyB,OAAO,CAACC,IAAI,CAAC,SAAS,CAAE3B,OAAO,CAAC,CACvCC,MAAM,CAACyB,OAAO,CAACE,EAAE,CAAC,UAAU,CAAE,SAAA/B,KAAK,CAAI,CACnCK,cAAc,CAACL,KAAK,CAAC,CACrBgC,OAAO,CAACC,GAAG,CAACjC,KAAK,CAAC,CACtB,CAAC,CAAC,CACN,CAAC,CACD4B,WAAW,CAAC,CAAC,CACb,CAAC,CAAE,CAACzB,OAAO,CAAC,CAAC,CAGb,mBACIV,IAAA,CAACL,GAAG,EAAA8C,QAAA,CACClC,KAAK,CAACmC,GAAG,CAAC,SAAAd,IAAI,QACX,CAAAA,IAAI,CAACe,GAAG,GAAGjC,OAAO,CAACiC,GAAG,eACtB3C,IAAA,CAACH,YAAY,EAAC+B,IAAI,CAAEA,IAAK,CAAC,CAAC,EAC9B,CAAC,CACD,CAAC,CAEd,CAAC,CAED,cAAe,CAAA3B,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}